test:
  name: certificate-benchmark-test
  description: RBAC-enabled certificate performance test

  workers:
    type: local
    number: 4

  rounds:

  # ------------------------------------------------
  # 1️⃣ Issue Certificates (Org1 Only)
  # ------------------------------------------------
  - label: Issue Certificates
    description: Org1 issues certificates
    txDuration: 30
    rateControl:
      type: fixed-rate
      opts:
        tps: 150
    workload:
      module: workload/issueCertificate.js
    txOptions:
      invokerIdentity: User1@org1.example.com

  # ------------------------------------------------
  # 2️⃣ Verify Certificates (Read Only - Org1)
  # ------------------------------------------------
  - label: Verify Certificate
    description: Verifying certificate authenticity
    txDuration: 30
    rateControl:
      type: fixed-rate
      opts:
        tps: 150
    workload:
      module: workload/verifyCertificate.js
    txOptions:
      invokerIdentity: User1@org1.example.com

  # ------------------------------------------------
  # 3️⃣ Query All Certificates (Read Only - Org1)
  # ------------------------------------------------
  - label: Query All Certificates
    description: Reading all certificates
    txDuration: 30
    rateControl:
      type: fixed-rate
      opts:
        tps: 150
    workload:
      module: workload/queryAllCertificates.js
    txOptions:
      invokerIdentity: User1@org1.example.com

  # ------------------------------------------------
  # 4️⃣ Revoke Certificate (Org2 Only - RBAC Enforced)
  # ------------------------------------------------
  - label: Revoke Certificate
    description: Org2 revokes certificates
    txDuration: 30
    rateControl:
      type: fixed-rate
      opts:
        tps: 150
    workload:
      module: workload/revokeCertificate.js
    txOptions:
      invokerIdentity: User1@org2.example.com
        # ------------------------------------------------
  # 5️⃣ Unauthorized Revoke Attempt (Should Fail)
  # ------------------------------------------------
  - label: Unauthorized Revoke Attempt
    description: Org1 tries to revoke (expected to fail due to RBAC)
    txDuration: 30
    rateControl:
      type: fixed-rate
      opts:
        tps: 50
    workload:
      module: workload/revokeCertificate.js
    txOptions:
      invokerIdentity: User1@org1.example.com

